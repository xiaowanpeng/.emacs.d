#ifndef _DMCEXT_COMMON_H_
#define _DMCEXT_COMMON_H_
#include "base_func.h"

#ifdef _DMCEXT_USE_HASH_MAP_
#include "hashmap.h"
typedef AISTD CHashMap<AISTD string, AISTD string> CStringHashMap;
#endif
typedef AISTD map<AISTD string, AISTD string> CStringMap;
typedef AISTD map<int32, int32> CIntegerMap;
typedef AISTD vector<CStringList> CStringListList;
typedef AISTD vector<bool> CBoolList;
typedef AISTD map<AISTD string, bool> CBoolMap;

#define SEM_KEY (0x0014741a)
#define SHM_KEY (0x0014741a)
#define MAX_SIZE 10240
#define SHM_SIZE (8*MAX_SIZE)

enum PLATTYPE
{
    QZT = 0,
    YJSH
};
enum KT_RESULT
{
    KT_SUCCESS = 0,
    KT_FAILURE = 1,
    KT_UNPROCESSED
};

typedef struct
{
    int net_hlr;
    int region_id;
}* UptrRegionCode;

typedef struct 
{
    int32 prod_id;
    int64 product_item_id;
}* UptrProductService;

typedef struct 
{
    char sp_code[60];
    char sp_service_id[60];
    int64 product_item_id;
}* UptrSpCodeService;

#define STR_TIME_CONDITION "EFFECTIVE_DATE <= SYSDATE and SYSDATE < EXPIRE_DATE "
#define STR_TIME_CONDITION_BOSS "VALID_DATE <= SYSDATE and SYSDATE < EXPIRE_DATE "
#define STR_TIME_CONDITION1 "EXPIRE_DATE > SYSDATE"
//region_center_rel
#define REGION_CENTER_REL "21142443323"
//for PLAT_CODE
#define PLATCODE_SELLING "100102"
#define PROD_ID_SELLING "90144039"
#define PLATCODE_PHONE_ASSISTANCE "105525"
#define PLATCODE_QZT "105487"
#define PLATCODE_YJSH "105424"
#define PLATCODE_QQW "70100002"
#define PLATCODE_XNW "70100001"
//for audit_sys_param
#define DMCEXT_BOSSCLEAR_VALIDDATE_DEF "DMCEXT_BOSSCLEAR_VALIDDATE_DEF"
#define DMCEXT_QUERYRESULT_EXPIRETIME "DMCEXT_QUERYRESULT_EXPIRETIME"
#define DMCEXT_BOSSCLEAR_OP_ID "DMCEXT_BOSSCLEAR_OP_ID"
#define DMCEXT_BOSSCLEAR_CHANNEL_TYPE "DMCEXT_BOSSCLEAR_CHANNEL_TYPE"
#define DMCEXT_BOSSCLEAR_ORG_ID "DMCEXT_BOSSCLEAR_ORG_ID"
#define DMCEXT_BATCH_REPAIR_PAGENUM "DMCEXT_BATCH_REPAIR_PAGENUM"
#define DMCEXT_NEED_AUTO_REPAIR "DMCEXT_NEED_AUTO_REPAIR"
#define SCHEME_NAME_AIJH "AIJH"
#define SCHEME_NAME_SO "SO"
#define SCHEME_NAME_BASE "RES"
#define SCHEME_NAME_PRODUCT "PRODUCT"
#define SCHEME_NAME_PARTY "PARTY"
#define SCHEME_NAME_BOSS "AICBS"
#define DB_ZJCRM_SO "DB_ZJCRM_SO"
#define DB_ZJCRM_BASE "DB_ZJRES_AIQRY"
#define DB_ZJCRM_PRODUCT "DB_ZJPUB"
#define DB_ZJRES "DB_ZJRES"
#define DB_ZJPARTY "DB_ZJRES"
#define DB_JH "DB_JH"
#define DB_BOSS "DB_ZJZW_AICBS"
#define FIELD_MSISDN "MSISDN"
#define FIELD_BILL_ID "BILL_ID"
#define FIELD_REL_MSISDN "REL_MSISDN"
#define FIELD_PLAT_CODE "PLAT_CODE"
#define FIELD_SERV_ID "SERV_ID"
#define FIELD_MONITOR_FLAG "MONITOR_FLAG"
#define FIELD_PROD_ID "PROD_ID"
#define FIELD_SP_CODE "SP_CODE"
#define FIELD_SP_SERVICE_ID "SP_SERVICE_ID"
#define FIELD_GROUP_ID "GROUP_ID"
#define FIELD_DEST_MSISDN "DEST_MSISDN"
#define FIELD_USER_ID "USER_ID"
#define FIELD_PLAN_ID "PLAN_ID"
#define FIELD_ACCT_ID "ACCT_ID"
#define FIELD_ACC_ID "ACC_ID"
#define FIELD_CUST_ID "CUST_ID"
#define FIELD_CUST_TYPE "CUST_TYPE"
#define FIELD_REGION_CODE "REGION_CODE"
#define FIELD_CONTACT_ID "CONTACT_ID"
#define FIELD_DISTINCT_TYPE "DISTINCT_TYPE"
#define FIELD_MAIL_TYPE "MAIL_TYPE"
#define FIELD_PROMOTION_ID "PROMOTION_ID"
#define FIELD_TERMINAL_NUMBER "TERMINAL_NUMBER"
#define FIELD_AUXILIARY "PLAT_CODE=100102;PROD_ID=14001028;SP_CODE=801174;SP_SERVICE_ID=125870;SP_SERVICE_NAME=12580;BILL_FLAG=0;FEE=0;VALID_DATE=20090306144941;EXPIRE_DATE=20991231000000;MSISDN=13605814723"
//#define FIELD_AUXILIARY "MSISDN=13454151581;PLAT_CODE=202800;PROD_ID=99007002"
//for xml node in clear boss data
#define NODE_BILL_ID "BillId"
#define NODE_DETAIL_DATA_ID "DetailDataId"
#define NODE_PROD_ID "ProdId"
#define NODE_EFFECTIVE_DATE "EffectiveDate"
#define NODE_FORCE_DELETE "ForceDelete"
#define NODE_REL_BILL_ID "RelBillId"
#define NODE_GROUP_ID "GroupId"
#define NODE_OFFER_ID "OfferId"
#define NODE_SVC_CONT "SvcCont"
#define NODE_TRANS_IDO "TransIDO"
#define NODE_PROCESS_TIME "ProcessTime"
#define NODE_OP_ID "OpId"
#define NODE_ORG_ID "OrgId"
#define NODE_CHANNEL_TYPE "ChannelType"
//for xml node in crmcboss repair
#define NODE_AUDIT_ID     "AuditId"   
#define NODE_USER_ID      "UserId"
#define NODE_ACCT_ID      "AcctId" 
#define NODE_CUST_ID      "CustId"      
#define NODE_PRODINS_ID   "ProdInsId"  
#define NODE_ORDER_SEQ    "OrderSeq"
#define NODE_SUBORDER_SEQ "SubOrderSeq"
#define NODE_CBOSS_POINT  "CbossPoint" 
#define NODE_CRM_POINT    "CrmPoint"   
#define NODE_OPER_TYPE    "OperType"   
#define NODE_FUNCTION_ID  "FunctionId"
#define FUNCTION_CLEAR_BOSS "10000"
#define FUNCTION_ORDER_PLAT "10001"
#define FUNCTION_CLEAR_PLAT "10002"
#define QUERY_REPAIR_RESULT_CONDITION "430, 431, 432, 433, 434"

#define OBD_USE_MDMCEXTBASEDEF_SBSDISTRICT
#define OBD_USE_MDMCEXTBASEDEF_SBSDISTRICTLIST
#define OBD_USE_MDMCEXTBASEDEF_SRESNUMBERHLR
#define OBD_USE_MDMCEXTBASEDEF_SRESNUMBERHLRLIST
#define OBD_USE_MDMCEXTCRMDEF_SINSOFFINSUSER
#define OBD_USE_MDMCEXTCRMDEF_SINSOFFINSUSERLIST
#define OBD_USE_MDMCEXTCRMDEF_SINSPROD
#define OBD_USE_MDMCEXTCRMDEF_SINSPRODLIST
#define OBD_USE_MDMCEXTCRMDEF_SINSUSER
#define OBD_USE_MDMCEXTCRMDEF_SINSUSERLIST
#define OBD_USE_MDMCEXTCRMDEF_SINSXDESTROYUSER
#define OBD_USE_MDMCEXTCRMDEF_SINSXDESTROYUSERLIST
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITTASKALL
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITTASKALLLIST
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITTASKRESULTALL
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITTASKRESULTALLLIST
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITRULERELATION
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITRULERELATIONLIST
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITDATADEFINEALL
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITDATADEFINEALLLIST
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITSYSPARAM
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITSYSPARAMLIST
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITINTFREPAIRLOG
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITINTFREPAIRLOGLIST
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITSYSTEMDEFINE
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITSYSTEMDEFINELIST
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITSERVICEINFO
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITSERVICEINFOLIST
#define OBD_USE_MDMCEXTPRODUCTDEF_SUPPLANPRODREL
#define OBD_USE_MDMCEXTPRODUCTDEF_SUPPLANPRODRELLIST
#define OBD_USE_MDMCEXTCRMDEF_SOPENPROVISIONWAIT
#define OBD_USE_MDMCEXTCRMDEF_SOPENPROVISIONWAITLIST
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITREPAIRINFO
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITREPAIRINFOLIST
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITRULEGROUPRELATION
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITRULEGROUPRELATIONLIST
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITFILEDEFINEDTL
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITFILEDEFINEDTLLIST
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITFILECOLUMNRELATION
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITFILECOLUMNRELATIONLIST
#define OBD_USE_MDMCEXTAUDITDEF_SUSERPHONEBYENCIWU
#define OBD_USE_MDMCEXTAUDITDEF_SUSERPHONEBYENCIWULIST
#define OBD_USE_MDMCEXTAUDITDEF_SPHONENUMBER
#define OBD_USE_MDMCEXTAUDITDEF_SPHONENUMBERLIST
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITYULL
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITYULLLIST
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITDIFFDETAIL
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITDIFFDETAILLIST
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITREPORTDATA
#define OBD_USE_MDMCEXTAUDITDEF_SAUDITREPORTDATALIST

//BOSS
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSUSER
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSUSERLIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSACCOUNT
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSACCOUNTLIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSCUSTOMER
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSCUSTOMERLIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSUSERORDER
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSUSERORDERLIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSUSERPLAN
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSUSERPLANLIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSUSERPROMRATE
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSUSERPROMRATELIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSACCUSERRELA
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSACCUSERRELALIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSGROUPUSER
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSGROUPUSERLIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSUSERSRELA
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSUSERSRELALIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSUSERSTATUS
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSUSERSTATUSLIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSUSERORDERSP
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSUSERORDERSPLIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSBENEFITFROM4
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSBENEFITFROM4LIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSINDIVIBILL
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSINDIVIBILLLIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSACCTCONTREL
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSACCTCONTRELLIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSACCTGROUPEXT
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSACCTGROUPEXTLIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSENTITYCARDORDERREL
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSENTITYCARDORDERRELLIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSEMANAGERACCOUNT
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSEMANAGERACCOUNTLIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSCONTACT
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSCONTACTLIST

//Begin of TT
#define OBD_USE_MDMCEXTBOSSDEF_SRTAUSER
#define OBD_USE_MDMCEXTBOSSDEF_SRTAUSERLIST
#define OBD_USE_MDMCEXTBOSSDEF_SRTAACCT
#define OBD_USE_MDMCEXTBOSSDEF_SRTAACCTLIST
#define OBD_USE_MDMCEXTBOSSDEF_SRTAUSERORDER
#define OBD_USE_MDMCEXTBOSSDEF_SRTAUSERORDERLIST
#define OBD_USE_MDMCEXTBOSSDEF_SRTAUSERMULTIORDER
#define OBD_USE_MDMCEXTBOSSDEF_SRTAUSERMULTIORDERLIST
#define OBD_USE_MDMCEXTBOSSDEF_SRTAUSERPROMRATE
#define OBD_USE_MDMCEXTBOSSDEF_SRTAUSERPROMRATELIST
#define OBD_USE_MDMCEXTBOSSDEF_SRTAUSERSTATUS
#define OBD_USE_MDMCEXTBOSSDEF_SRTAUSERSTATUSLIST
#define OBD_USE_MDMCEXTBOSSDEF_SRTAUSERROUTE
#define OBD_USE_MDMCEXTBOSSDEF_SRTAUSERROUTELIST
#define OBD_USE_MDMCEXTBOSSDEF_SRTAACCTROUTE
#define OBD_USE_MDMCEXTBOSSDEF_SRTAACCTROUTELIST
#define OBD_USE_MDMCEXTBOSSDEF_SRTAUSERPAY
#define OBD_USE_MDMCEXTBOSSDEF_SRTAUSERPAYLIST
#define OBD_USE_MDMCEXTBOSSDEF_SRTAGROUPUSER
#define OBD_USE_MDMCEXTBOSSDEF_SRTAGROUPUSERLIST
#define OBD_USE_MDMCEXTBOSSDEF_SRTAUSERSRELA
#define OBD_USE_MDMCEXTBOSSDEF_SRTAUSERSRELALIST
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSUSERORDER
#define OBD_USE_MDMCEXTBOSSDEF_SBOSSUSERORDERLIST
//End of TT

//Begin of party
#define OBD_USE_MDMCEXTPARTYDEF_SINSXCBOSSAUDIT
#define OBD_USE_MDMCEXTPARTYDEF_SINSXCBOSSAUDITLIST
#define OBD_USE_MDMCEXTPARTYDEF_SSINSXUSERBINDRELAT
#define OBD_USE_MDMCEXTPARTYDEF_SSINSXUSERBINDRELATLIST
#define OBD_USE_MDMCEXTPARTYDEF_SSCMGROUPCUSTOMER
#define OBD_USE_MDMCEXTPARTYDEF_SSCMGROUPCUSTOMERLIST
#define OBD_USE_MDMCEXTPARTYDEF_SSCMXGROUPACCOUNT
#define OBD_USE_MDMCEXTPARTYDEF_SSCMXGROUPACCOUNTLIST
#define OBD_USE_MDMCEXTPARTYDEF_SSCMGROUPEXTRAINFO
#define OBD_USE_MDMCEXTPARTYDEF_SSCMGROUPEXTRAINFOLIST
//End of party by wuec

//Begin of CRM

#define OBD_USE_MDMCEXTCRMDEF_SINSUSER
#define OBD_USE_MDMCEXTCRMDEF_SINSUSERLIST
#define OBD_USE_MDMCEXTPARTYDEF_SCMXGROUPACCOUNT
#define OBD_USE_MDMCEXTPARTYDEF_SCMXGROUPACCOUNTLIST
#define OBD_USE_MDMCEXTCRMDEF_SINSXUSERRELATE
#define OBD_USE_MDMCEXTCRMDEF_SINSXUSERRELATELIST
#define OBD_USE_MDMCEXTCRMDEF_SORDXACCRELWAIT
#define OBD_USE_MDMCEXTCRMDEF_SORDXACCRELWAITLIST
#define OBD_USE_MDMCEXTCRMDEF_SINSUSEROSSTATE
#define OBD_USE_MDMCEXTCRMDEF_SINSUSEROSSTATELIST
#define OBD_USE_MDMCEXTPARTYDEF_SINSXUSERBINDRELAT
#define OBD_USE_MDMCEXTPARTYDEF_SINSXUSERBINDRELATLIST
#define OBD_USE_MDMCEXTPARTYDEF_SCMXGROUPACCOUNT
#define OBD_USE_MDMCEXTPARTYDEF_SCMXGROUPACCOUNTLIST
#define OBD_USE_MDMCEXTCRMDEF_SORDXUSERMONITOR
#define OBD_USE_MDMCEXTCRMDEF_SORDXUSERMONITORLIST
#define OBD_USE_MDMCEXTPARTYDEF_SCMGROUPEXTRAINFO
#define OBD_USE_MDMCEXTPARTYDEF_SCMGROUPEXTRAINFOLIST
#define OBD_USE_MDMCEXTCRMDEF_SCMINDIVCUSTOMER
#define OBD_USE_MDMCEXTCRMDEF_SCMINDIVCUSTOMERLIST
#define OBD_USE_MDMCEXTPARTYDEF_SCMGROUPCUSTOMER
#define OBD_USE_MDMCEXTPARTYDEF_SCMGROUPCUSTOMERLIST
#define OBD_USE_MDMCEXTCRMDEF_SCMACCOUNT
#define OBD_USE_MDMCEXTCRMDEF_SCMACCOUNTLIST
#define OBD_USE_MDMCEXTCRMDEF_SCMACCTBANKINFO
#define OBD_USE_MDMCEXTCRMDEF_SCMACCTBANKINFOLIST
#define OBD_USE_MDMCEXTCRMDEF_SCMCONTACT
#define OBD_USE_MDMCEXTCRMDEF_SCMCONTACTLIST
#define OBD_USE_MDMCEXTCRMDEF_SCMACCTCONTREL
#define OBD_USE_MDMCEXTCRMDEF_SCMACCTCONTRELLIST
#define OBD_USE_MDMCEXTCRMDEF_SVPMNGROUPRATE
#define OBD_USE_MDMCEXTCRMDEF_SVPMNGROUPRATELIST
#define OBD_USE_MDMCEXTCRMDEF_SINSACCREL
#define OBD_USE_MDMCEXTCRMDEF_SINSACCRELLIST
#define OBD_USE_MDMCEXTCRMDEF_SINSOFFER
#define OBD_USE_MDMCEXTCRMDEF_SINSOFFERLIST
#define OBD_USE_MDMCEXTCRMDEF_SINSOFFERINSUSER
#define OBD_USE_MDMCEXTCRMDEF_SINSOFFERINSUSERLIST
#define OBD_USE_MDMCEXTCRMDEF_SINSPROD
#define OBD_USE_MDMCEXTCRMDEF_SINSPRODLIST
#define OBD_USE_MDMCEXTCRMDEF_SINSPRODINSSRV
#define OBD_USE_MDMCEXTCRMDEF_SINSPRODINSSRVLIST
#define OBD_USE_MDMCEXTCRMDEF_SINSSRVATTR
#define OBD_USE_MDMCEXTCRMDEF_SINSSRVATTRLIST
#define OBD_USE_MDMCEXTCRMDEF_SINSPRICEATTR
#define OBD_USE_MDMCEXTCRMDEF_SINSPRICEATTRLIST
#define OBD_USE_MDMCEXTPARTYDEF_SCMGROUPEXTRAINFO
#define OBD_USE_MDMCEXTPARTYDEF_SCMGROUPEXTRAINFOLIST
#define OBD_USE_MDMCEXTCRMDEF_SIUSER
#define OBD_USE_MDMCEXTCRMDEF_SIUSERLIST
#define OBD_USE_MDMCEXTCRMDEF_SIUSERSPROM
#define OBD_USE_MDMCEXTCRMDEF_SIUSERSPROMLIST
#define OBD_USE_MDMCEXTCRMDEF_SIUSERRELATION
#define OBD_USE_MDMCEXTCRMDEF_SIUSERRELATIONLIST
#define OBD_USE_MDMCEXTCRMDEF_SIGROUPMEMBER
#define OBD_USE_MDMCEXTCRMDEF_SIGROUPMEMBERLIST
#define OBD_USE_MDMCEXTCRMDEF_SIGROUPMEMBEREXTERIOR
#define OBD_USE_MDMCEXTCRMDEF_SIGROUPMEMBEREXTERIORLIST
#define OBD_USE_MDMCEXTCRMDEF_SIUSERPLAN
#define OBD_USE_MDMCEXTCRMDEF_SIUSERPLANLIST
#define OBD_USE_MDMCEXTCRMDEF_SIUSERCELL
#define OBD_USE_MDMCEXTCRMDEF_SIUSERCELLLIST
#define OBD_USE_MDMCEXTCRMDEF_SISPROMPARAM
#define OBD_USE_MDMCEXTCRMDEF_SISPROMPARAMLIST
#define OBD_USE_MDMCEXTCRMDEF_SIBINDNUMBER
#define OBD_USE_MDMCEXTCRMDEF_SIBINDNUMBERLIST
#define OBD_USE_MDMCEXTCRMDEF_SIUSERBILLCYCLE
#define OBD_USE_MDMCEXTCRMDEF_SIUSERBILLCYCLELIST
#define OBD_USE_MDMCEXTCRMDEF_SIFREERESRULE
#define OBD_USE_MDMCEXTCRMDEF_SIFREERESRULELIST
#define OBD_USE_MDMCEXTCRMDEF_SIUSERMONITOR
#define OBD_USE_MDMCEXTCRMDEF_SIUSERMONITORLIST
#define OBD_USE_MDMCEXTCRMDEF_SCMBILLCUSTOMIZE
#define OBD_USE_MDMCEXTCRMDEF_SCMBILLCUSTOMIZELIST
#define OBD_USE_MDMCEXTCRMDEF_SOUTDATASAVEDATA
#define OBD_USE_MDMCEXTCRMDEF_SOUTDATASAVEDATALIST

//End of CRM



#define DMCEXT_ERROR_LOG( FUN_NAME ) \
    LogAppend(INFO_LEVEL, "InfoLevel", AISTD string("CALL " + AISTD string(#FUN_NAME) + AISTD string(" ERROR$")).c_str()); \
return OBD_FAIL;
//cErrorMsg.set_errorMsg(AISTD string("CALL ") + AISTD string(#FUN_NAME) + AISTD string(" ERROR$")); \

#define DMCEXT_EXCEPTION_LOG( FUN_NAME ) \
    LogAppend(INFO_LEVEL, "InfoLevel", AISTD string("EXCEPTION CATCHED WHEN CALL " + AISTD string(#FUN_NAME) + AISTD string("$")).c_str()); \
return OBD_EXCEPTION;
//cErrorMsg.set_errorMsg(AISTD string("EXCEPTION CATCHED WHEN CALL ") + AISTD string(#FUN_NAME) + AISTD string("$")); \

#define DMCEXT_NO_DATA_ERROR( TABLE_NAME ) \
    LogAppend(INFO_LEVEL, "InfoLevel", AISTD string(AISTD string("NO SATISFIED RECORD SELECTED FROM TABLE ") + AISTD string(#TABLE_NAME)  + "$").c_str()); \
return OBD_FAIL;
//cErrorMsg.set_errorMsg(AISTD string("NO SATISFIED RECORD SELECTED FROM TABLE ") + AISTD string(#TABLE_NAME)  + AISTD string("$")); \

#define DMCEXT_LOG_BEG( FUN_NAME ) \
    LogAppend(INFO_LEVEL, "DebugInfo", AISTD string("Function " + AISTD string(#FUN_NAME) + " begin$").c_str()); \
try \
{

#define DMCEXT_LOG_END( FUN_NAME ) \
} \
catch(const CBSErrorMsg& cErr) \
{ \
    LogAppend(INFO_LEVEL, "DebugInfo", cErr.get_hint().c_str()); \
    LogAppend(INFO_LEVEL, "DebugInfo", cErr.get_errorMsg().c_str()); \
    return OBD_EXCEPTION; \
} \
catch(...) \
{ \
    LogAppend(FATAL_LEVEL, "DebugInfo", "APP UNKNOWN ERROR"); \
    return OBD_EXCEPTION; \
} \
LogAppend(INFO_LEVEL, "DebugInfo", AISTD string("Function " + AISTD string(#FUN_NAME) + " end$").c_str()); \
return OBD_OK;

#define DMCEXT_INIT( FUN_NAME ) \
DMCEXT_LOG_BEG( FUN_NAME ); \
otl_connect* dbConnect = pSession->get_dbConnByName(DB_JH); \
try{

#define DMCEXT_COMMIT_ERROR \
{ \
    dbConnect->rollback(); \
    LogAppend(FATAL_LEVEL, "DebugInfo", cErrorMsg.get_errorMsg().c_str()); \
    LogAppend(FATAL_LEVEL, "DebugInfo", cErrorMsg.get_hint().c_str()); \
    return OBD_FAIL; \
}

#define DMCEXT_COMMIT_OK( FUN_NAME ) \
    dbConnect->commit(); \
} \
catch(const CBSErrorMsg& cErr) \
{ \
    dbConnect->rollback(); \
    LogAppend(INFO_LEVEL, "DebugInfo", cErr.get_hint().c_str()); \
    LogAppend(INFO_LEVEL, "DebugInfo", cErr.get_errorMsg().c_str()); \
    return OBD_EXCEPTION; \
} \
catch(...) \
{ \
    dbConnect->rollback(); \
    LogAppend(FATAL_LEVEL, "DebugInfo", "APP UNKNOWN ERROR"); \
    return OBD_EXCEPTION; \
} \
DMCEXT_LOG_END( FUN_NAME )

#endif
